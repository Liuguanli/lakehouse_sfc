generation: {n: 10, mode: random, seed: 61}

templates:
  - id: RANGE_FILTER_COUNT
    sql: |
      SELECT COUNT(*) AS review_cnt
      FROM {{tbl}}
      WHERE record_timestamp BETWEEN TIMESTAMP ':ts_lo' AND TIMESTAMP ':ts_hi'
        AND rating BETWEEN :rating_lo AND :rating_hi
        AND helpful_vote BETWEEN :hv_lo AND :hv_hi;
    params:
      ts_lo:      {type: date, range: ['2018-01-01', '2023-12-31']}
      ts_hi:      {type: date, range: ['2018-01-01', '2023-12-31'], constraint: "ts_hi >= ts_lo"}
      rating_lo:  {type: int,  range: [1, 4]}
      rating_hi:  {type: int,  range: [2, 5], constraint: "rating_hi >= rating_lo"}
      hv_lo:      {type: int,  range: [0, 200]}
      hv_hi:      {type: int,  range: [10, 400], constraint: "hv_hi >= hv_lo"}
    interval_rules:
      - {column: record_timestamp, lo: ts_lo, hi: ts_hi, type: date, ratio_range: [0.03, 0.12], clip_to_domain: true}
      - {column: helpful_vote,    lo: hv_lo, hi: hv_hi, type: int,  ratio_range: [0.05, 0.30], clip_to_domain: true}
